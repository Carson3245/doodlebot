<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DoodleBot Personality</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <button class="menu-toggle" aria-label="Toggle navigation" aria-controls="main-menu" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav id="main-menu" class="menu-panel" hidden>
      <p class="menu-title">Navigation</p>
      <a class="menu-item" href="/personality.html" aria-current="page">Personality</a>
      <a class="menu-item" href="/commands.html">Commands</a>
      <a class="menu-item" href="/logs.html">Logs</a>
    </nav>

    <header>
      <h1>Personality</h1>
      <p>Teach the model how to speak for your community by tuning tone, style, and Hugging Face settings.</p>
      <a class="subtle-link" href="/">Back to overview</a>
    </header>

    <main>
      <section class="card">
        <h2>Conversation model</h2>
        <form id="personality-form">
          <label for="welcome-message">Greeting template</label>
          <textarea
            id="welcome-message"
            name="welcomeMessage"
            rows="3"
            placeholder="Welcome to the server, {user}!"
            required
          ></textarea>
          <p class="helper">Use placeholders like <code>{user}</code>, <code>{server}</code>, or <code>{channel}</code>.</p>

          <label for="tone-select">Tone</label>
          <select id="tone-select" name="tone">
            <option value="friendly">Friendly</option>
            <option value="professional">Professional</option>
            <option value="playful">Playful</option>
            <option value="serious">Serious</option>
          </select>

          <label for="conversation-style">Speaking style</label>
          <select id="conversation-style" name="conversationStyle">
            <option value="supportive">Supportive</option>
            <option value="informative">Informative</option>
            <option value="playful">Playful</option>
            <option value="concise">Concise</option>
          </select>

          <label for="response-length">Target response length (words)</label>
          <input
            id="response-length"
            name="responseLength"
            type="number"
            min="16"
            max="160"
            step="4"
            value="80"
          />
          <p class="helper">The bot keeps replies close to this length when generating with the model.</p>

          <label for="guidance">Additional guidance for the model</label>
          <textarea
            id="guidance"
            name="guidance"
            rows="4"
            placeholder="Keep conversations safe, welcoming, and focused on quick problem solving."
          ></textarea>
          <p class="helper">This text is injected into the prompt so the AI follows your moderation policies.</p>

          <div class="divider"></div>

          <h3>Hugging Face model</h3>
          <p class="helper">Configure the lightweight transformer used for every reply.</p>

          <label for="hf-model-id">Model ID</label>
          <input
            id="hf-model-id"
            name="hfModelId"
            placeholder="Xenova/distilgpt2"
          />
          <p class="helper">Choose compact CPU-friendly models such as <code>Xenova/distilgpt2</code>.</p>

          <label for="hf-max-tokens">Max new tokens</label>
          <input id="hf-max-tokens" name="hfMaxTokens" type="number" min="16" max="512" step="1" />

          <label for="hf-temperature">Temperature</label>
          <input id="hf-temperature" name="hfTemperature" type="number" min="0.1" max="2" step="0.1" />

          <label for="hf-top-p">Top P</label>
          <input id="hf-top-p" name="hfTopP" type="number" min="0.1" max="1" step="0.05" />

          <label for="hf-repetition">Repetition penalty</label>
          <input id="hf-repetition" name="hfRepetition" type="number" min="0.5" max="2" step="0.05" />

          <button type="submit" class="primary-action">Save personality</button>
          <p id="personality-feedback" role="status"></p>
        </form>
      </section>
    </main>

    <footer>
      <small>Values are saved to disk and loaded automatically when the bot restarts.</small>
    </footer>

    <script src="main.js" type="module"></script>
  </body>
</html>
