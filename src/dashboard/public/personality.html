<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DoodleBot Personality</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <button class="menu-toggle" aria-label="Toggle navigation" aria-controls="main-menu" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav id="main-menu" class="menu-panel" hidden>
      <p class="menu-title">Navigation</p>
      <a class="menu-item" href="/personality.html" aria-current="page">Personality</a>
      <a class="menu-item" href="/commands.html">Commands</a>
      <a class="menu-item" href="/logs.html">Logs</a>
    </nav>

    <header>
      <h1>Personality</h1>
      <p>
        Shape how the bot greets new members and answer questions. Each option below includes a quick note about what it
        changes so you can fine-tune the voice without AI jargon.
      </p>
      <a class="subtle-link" href="/">Back to overview</a>
    </header>

    <main>
      <section class="card">
        <h2>Conversation basics</h2>
        <form id="personality-form">
          <label for="welcome-message">Greeting template</label>
          <textarea
            id="welcome-message"
            name="welcomeMessage"
            rows="3"
            placeholder="Welcome to the server, {user}!"
            required
          ></textarea>
          <p class="helper">Use placeholders like <code>{user}</code>, <code>{server}</code>, or <code>{channel}</code>.</p>

          <label for="tone-select">Overall tone</label>
          <select id="tone-select" name="tone">
            <option value="friendly">Friendly</option>
            <option value="professional">Professional</option>
            <option value="playful">Playful</option>
            <option value="serious">Serious</option>
          </select>
          <p class="helper">Select the mood you want every reply to follow.</p>

          <label for="conversation-style">Speaking style</label>
          <select id="conversation-style" name="conversationStyle">
            <option value="supportive">Supportive</option>
            <option value="informative">Informative</option>
            <option value="playful">Playful</option>
            <option value="concise">Concise</option>
          </select>
          <p class="helper">Choose how the bot structures its sentences when the model answers.</p>

          <label for="response-length">Typical reply length (words)</label>
          <input
            id="response-length"
            name="responseLength"
            type="number"
            min="16"
            max="160"
            step="4"
            value="80"
          />
          <p class="helper">The model aims to stay near this length. Lower numbers keep answers short and snappy.</p>

          <label for="guidance">Operator notes for the model</label>
          <textarea
            id="guidance"
            name="guidance"
            rows="4"
            placeholder="Keep conversations safe, welcoming, and focused on quick problem solving."
          ></textarea>
          <p class="helper">Explain any house rules or goals. The model reads this before replying.</p>

          <div class="divider"></div>

          <h3>Hugging Face model</h3>
          <p class="helper">These settings control the small offline model the bot runs for every response.</p>

          <label for="hf-model-id">Model name to load</label>
          <input
            id="hf-model-id"
            name="hfModelId"
            placeholder="Xenova/TinyLlama-1.1B-Chat-v1.0"
          />
          <p class="helper">Default: <code>Xenova/TinyLlama-1.1B-Chat-v1.0</code>. Pick another CPU-friendly chat model if you have one cached.</p>

          <label for="hf-max-tokens">Maximum generated words</label>
          <input id="hf-max-tokens" name="hfMaxTokens" type="number" min="16" max="512" step="1" />
          <p class="helper">Caps how long the model continues a reply. Higher values allow longer answers.</p>

          <label for="hf-temperature">Response creativity</label>
          <input id="hf-temperature" name="hfTemperature" type="number" min="0.1" max="2" step="0.1" />
          <p class="helper">Also known as temperature: lower numbers keep replies steady, higher numbers add variety.</p>

          <label for="hf-top-p">Vocabulary range</label>
          <input id="hf-top-p" name="hfTopP" type="number" min="0.1" max="1" step="0.05" />
          <p class="helper">Controls how many alternative words the model can consider for each token.</p>

          <label for="hf-repetition">Repeat limiter</label>
          <input id="hf-repetition" name="hfRepetition" type="number" min="0.5" max="2" step="0.05" />
          <p class="helper">Higher numbers push the model to avoid echoing the same phrases.</p>

          <button type="submit" class="primary-action">Save personality</button>
          <p id="personality-feedback" role="status"></p>
        </form>
      </section>
    </main>

    <footer>
      <small>Values are saved to disk and loaded automatically when the bot restarts.</small>
    </footer>

    <script src="main.js" type="module"></script>
  </body>
</html>
